Training Lessons:



* Semantic segmentation
  * A single mesh optimization example.

  * Evaluate the 2D segmentation performance.
  * Evaluate the naive mesh vertex assignment and rendering performance.

  * Write a new branch to predict texture
    * do residual?
    * how many stages?

  * Probably need to use two different backbones.

  * Together from scratch
    * (Not working) Semantic only 2D classifier, no graph conv, no mesh rendering.
  * First geometry (50 epochs), then semantic.
    * Semantic only 2D classifier, no graph conv, no mesh rendering.

* Seems like the package versions matter (PyTorch, PyTorch3D)
  * PyTorch 1.6.0 + PyTorch3D 0.2.5 (Promising.)
  * GO with this. PyTorch 1.6.0 + PyTorch3D 0.3.0 (Promising.)
  * PyTorch 1.6.0 + PyTorch3D 0.4.0 (Tried very few epochs but seems not working well.)
  * PyTorch 1.7.1 + PyTorch3D 0.4.0 (Tried most. Not able to train stably.)
  * PyTorch 1.7.1 + PyTorch3D 0.6.1 (Tried very few epochs but seems not working well.)

__0206_1642_resnet18_train_mesh1024_depth[1000]_dnorm_2D_3D_channel5_3_3_64_0.0005__  
Geometry training, 100 epochs. Add semantic feature channel but zero. 5 channels.  

__0208_2036_resnet18_train_mesh1024_depth[1000]_dnorm_2D_3D_channel5_3_3_64_0.0005__
Geometry training, 100 epochs. Add semantic feature channel but zero. 5 channels.  



terrainmesh.txt:  
This is the export file of a conda environment. Generated by conda list --explicit > terrainmesh.txt  
Build an env from this: conda create --name terrainmesh --file terrainmesh.txt

### Existing models:
0124_2331_train_mesh1024_depth1000_channel3_focal_loss_50_0.01  
The resnet50 model for semantic segmentation initialization. Takes 3 channels as inputs.  

0125_1617_deeplab_resnet18_train_mesh1024_depth1000_channel3_focal_loss_50_0.01  
The resnet18 model for semantic segmentation initialization. Takes 3 channels as inputs.  

0125_1619_deeplab_resnet34_train_mesh1024_depth1000_channel3_focal_loss_50_0.01
The resnet34 model for semantic segmentation initialization. Takes 3 channels as inputs.  

0202_1359_resnet18_train_mesh1024_depth[1000]_dnorm_2D_3D_channel5_3_3_64_0.0005

0202_1517_resnet18_train_mesh1024_depth[1000]_dnorm_2D_3D_channel4_3_3_64_0.0005



**train.py**  
The main training function.  

**loss.py**  
Define the loss functions we use. Include the 2D/3D for geometric reconstruction and cross entropy for semantic segmentation.  

**config.py**  
Some configuration parameters. All important adjustable parameters should also be included in Sensat_basic.yaml.  

**dataset**  
To build the dataloader.

**mesh_init**  
Include functions that initialize a 3D mesh from a flat mesh using sparse or dense depth map. One use linear solver when the depth measurements are limited. The other use PyTorch3D differentiable renderer to back-propagate the error on 2D depth image.  

**model**  
TODO: try the Deeplab version image backbone and classification module.  
The neural network model. 

**segmentation**  
Ref: https://github.com/VainF/DeepLabV3Plus-Pytorch  


**utils**  
Some utility functions.